<html lang="es">
<head>
    <link rel="stylesheet" type="text/css" href="../../documentation.css" />
    <link rel="icon" href="https://raw.githubusercontent.com/redtoast/NeetComputers/refs/heads/live-20.1/assets_dev/logo.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Oswald" />
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
    <title>File System API</title>
</head>
<body>
<a href="../../categories/chipset.html" id="headerlink"><h1>Chipset / Peripherals / 'file system'</h1></a>
<p>This peripheral represents the computers filesystem, and is created on the computers runtime</p>
<div>
    <h3 id="open">open(Path, Mode)</h3>
    <p>
        this is the core function of the file-system, if the <i>Path</i> exists this function returns the chosen file in the selected <i>Mode</i> and returns a <a href="#handler">file handler</a> representing the file
        <br>
        <br>
        <i id="mode">Mode</i> is a 1-2 letter string that can change how the file handler interacts with the file:<br>
        <code>'r'</code> read mode: only allows the file handler to use read functions<br>
        <code>'w'</code> write mode: allows the handler to write bytes a new file that overrides the existent one<br>
        <code>'a'</code> append mode: the same as write mode except the handlers buffer is written onto the existing file instead of replacing it<br>
        <code>'r+'</code> read write mode: write mode except you can now read the bytes you just wrote<br>
        <code>'a+'</code> append+ mode: the handler works the read mode however write functions append data to the back of the file<br>
        Any mode that reads requires the file to be readable to open and any writing operation needs the file to be writable, if these conditions are not met the open function will throw 'Access denied'<br>
        write, append, and append+ will create a file if it does not exist<br>
        <br>
        <i>Mode</i> defaults to read mode if nil
    </p>
</div>

<hr>
<h2>Generic file operations</h2>
<p>There are some common operations a file handler cant do, and most of those are documented in the section below</p>

<div>
    <h3>exists(Path)</h3>
    <p>Tests to see if <i>Path</i> exists</p>

    <h3>isFile(Path)</h3>
    <p>Tests if <i>Path</i> both exists and is not a directory</p>

    <h3>isDir(Path)</h3>
    <p>Tests if <i>Path</i> both exists and is a directory</p>

    <h3>delete(Path)</h3>
    <p>If <i>Path</i> exists and can be written too, this method will delete that file</p>

    <h3>makeDir()</h3>
    <p>Attempts to make a directory at the path, including creating parent directory's if not already present</p>

    <h3>getChildren(Path)</h3>
    <p>If <i>Path</i> is a directory, returns a list of absolute paths representing this directory's children</p>
</div>

<h2>Partition operations</h2>
<p>Operations for modifying or reading <a href="../../concepts/partitions.html">partitions</a></p>

<div>
    <h3>getPartition(partitionName)</h3>
    <p>
        Returns a table representing <i>partitionName</i> or null if no such <a href="../../concepts/partitions.html">partition</a> applies<br>
        The table returned will match the following layout:<br>
        <code>'name'</code> represents the path of the partition<br>
        <code>'readonly'</code> represents if the partition is marked to only be capable of being read<br>
        <code>'hidden'</code> marks if this partition wants to be treated as hidden, not strictly enforced
    </p>

    <h3>getPartitions()</h3>
    <p>Returns a list of tables representing all the <a href="../../concepts/partitions.html">partitions</a> on the file system</p>

    <h3>createPartition(PartitionName)</h3>
    <p>Attempts to create <i>PartitionName</i> and returns a flag indicating if the operation was a success</p>

    <h3>setPartitionHidden(PartitionName, State)</h3>
    <p>Sets <i>PartitionName</i>'s hidden quality to <i>State</i>, and returns a flag indicating if the operation was a success</p>

    <h3>setReadOnly(PartitionName)</h3>
    <p>Marks <i>PartitionName</i> as being readOnly, a readOnly partition cant be made writable</p>
</div>

<hr>
<h2 id="handler">File handler methods</h2>
<p>
    This section all the methods and documentation for the file handlers generated by <a href="#open">open(...)</a><br>
    <br>
    File handlers contain two primary components, a large string of bytes referred too as the 'buffer' and a 'cursor' that determines where reading should begin from the buffer, set to 0 by default<br>
    The buffer is not the same as the files contents, instead the buffer is created independently based of the <a href="#mode">mode</a>, and the buffer is <a href="#flush">'flushed'</a> to the file, writing it depending on how the mode specifies it should be written
</p>

<div>
    <h3 id="flush">flush()</h3>
    <p>"flushes" the handlers internal buffer, writing the contents of the handler to the file</p>

    <h3>close()</h3>
    <p>flushes the file and makes it inoperable</p>

    <h3>seek(whence, offset)</h3>
    <p>
        Seek serves to move the handlers cursor or find its position, relevant to the internal buffer, depending on the parameters<br>
        <i>whence</i> determent where seek starts the operation:<br>
        <code>set</code> tells the operation to begin at the start of the handler<br>
        <code>cur</code> tells the operation to start from the cursors current position<br>
        <code>end</code> sets the operation to start from the handlers end<br>
        <br>
        <i>offset</i> determines the offset from the operations starting point as defined by <i>whence</i>, to move the cursor<br>
        once the operation is complete the new position of the cursor is returned by seek<br>
        <br>
        by providing an <i>offset</i> of 0 you can read the position defined by <i>whence</i>, allowing you to query the size of the buffer or current cursor pos<br>
        to make this easier you can call <code>seek(whence)</code>, which will default <i>offset</i> to 0<br>
        you can also call <code>seek()</code> with no args, defaulting <i>whence</i> to 'cur' and <i>offset</i> to 0, affectively just querying the current cursor pos
    </p>

    <h3>write(data)</h3>
    <p>writes <i>data</i> to the handler's internal buffer, data can be a string of text or a number representing a byte. note that writing does not affect the cursor</p>

    <h3>read(format)</h3>
    <p>
        Reads the buffer until reaching a ending defined by <i>format</i>, which is usually defaulted to <code>'l'</code><br>
        <br>
        format support three values:<br>
        <code>l</code> reads until the next line of text<br>
        <code>L</code> is the same as the above except a next-line marker is appended after the read text<br>
        <code>a</code> reads from the cursor to the end of the file
    </p>
</div>
</body>
</html>